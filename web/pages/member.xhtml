<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/template/modeloSistema.xhtml">

    <ui:define name="menu">
        <ui:include src="/pages/menu.xhtml"/>        
    </ui:define>

    <ui:define name="conteudo">
        <h:form id="formTblMember">
            <p:dataTable id="tblMember" emptyMessage="Nenhum Membro encontrado." 
                         value="#{MBMember.memberList}" 
                         var="member"                     
                         paginator="true"
                         rows="10"
                         selectionMode="single"
                         selection="#{MBMember.member}" 
                         rowKey="#{member.idMember}">

                <p:ajax event="rowSelect" listener="#{MBMember.onRowSelect}"  />

                <f:facet name="header" >
                    Relação Geral de Membros do Clube
                </f:facet>

                <p:column headerText="Código" sortBy="#{member.idMember}">
                    <h:outputText value="#{member.idMember}" />
                </p:column>

                <p:column headerText="Nome" sortBy="#{member.nomeMember}">
                    <h:outputText value="#{member.nomeMember}" />
                </p:column>

                <p:column headerText="Função" sortBy="#{member.nivelAcesso.funcao}">
                    <h:outputText value="#{member.nivelAcesso.funcao}" />
                </p:column>

                <p:column headerText="Data Nascimento" sortBy="#{member.dtNascimento}">
                    <h:outputText value="#{member.dtNascimento}" />
                </p:column>

                <p:column headerText="Endereço" sortBy="#{member.endereco}">
                    <h:outputText value="#{member.endereco}" />
                </p:column>

                <p:column headerText="CPF" sortBy="#{member.cpf}">
                    <h:outputText value="#{member.cpf}" />
                </p:column>

                <p:column headerText="RG" sortBy="#{member.rg}">
                    <h:outputText value="#{member.rg}" />
                </p:column>

                <p:column headerText="Telefone" sortBy="#{member.telefone}">
                    <h:outputText value="#{member.telefone}" />
                </p:column>

                <p:column headerText="Email" sortBy="#{member.email}">
                    <h:outputText value="#{member.email}" />
                </p:column>

                <f:facet name="footer" >
                    <p:commandButton value="Novo" actionListener="#{MBMember.prepararMember()}" 
                                     oncomplete="PF('newMember').show()"
                                     update=":formPnlNewMember:pnlNewMember" />
                </f:facet>
            </p:dataTable>
        </h:form>   

        <p:dialog id="newMember" widgetVar="newMember"
                  closable="false"
                  draggable="true"
                  resizable="false"
                  modal="true" appendTo="@(body)"
                  header="Cadastro de Membro do Clube">

            <h:form id="formPnlNewMember">
                <h:panelGrid id="pnlNewMember" columns="2">
                    <p:outputLabel value="Nome" />
                    <p:inputText size="30" maxlength="30" value="#{MBMember.member.nomeMember}"/>

                    <p:outputLabel value="Função" />
                    <p:selectOneMenu effect="slide" value="#{MBMember.member.nivelAcesso}">   
                        <f:selectItems value="#{MBMember.nivel}" var="nivel" itemValue="#{nivel}" itemLabel="#{nivel.funcao}"/>                       
                    </p:selectOneMenu>
                    
                    <p:outputLabel  value="Data de Nascimento" />
                    <p:calendar locale="pt_BR" pattern="dd/MM/yyyy" mask="true" navigator="true" readonlyInput="true" maxdate="c+0" yearRange="c-100:c+100" value="#{MBMember.member.dtNascimento}"/>                   

                    <p:outputLabel value="Endereço" />
                    <p:inputText size="30" maxlength="30"/>

                    <p:outputLabel value="CPF" />
                    <p:inputText size="30" maxlength="30"/>

                    <p:outputLabel value="RG" />
                    <p:inputText size="30" maxlength="30"/>

                    <p:outputLabel value="E-Mail" />
                    <p:inputText size="30" maxlength="30"/>

                    <p:outputLabel value="Telefone" />
                    <p:inputText size="30" maxlength="30"/>

                </h:panelGrid>

                <h:panelGrid columns="2">
                    <p:commandButton value="Salvar" actionListener="#{MBMember.saveMember()}"
                                     oncomplete="PF('newMember').hide();" 
                                     update=":formTblMember:tblMember" />
                    <p:commandButton value="Cancelar" onclick="PF('newMember').hide();"/>
                </h:panelGrid>                                

            </h:form>
            
        </p:dialog>

    </ui:define>

</ui:composition>
